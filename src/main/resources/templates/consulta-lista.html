<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      th:replace="~{layout :: layout(titulo='Consultas Agendadas', conteudo=~{::section})}">

<section>

    <h2>Consultas Agendadas</h2>

    <div style="margin-bottom: 50px;">
        <a th:href="@{/consulta/cadastro}" class="btn btn-primary centralizar">
            + Nova Consulta
        </a>
    </div>

<table class="tabela">
    <thead>
        <tr>
            <th>Paciente</th>
            <th>Especialidade</th>
            <th>Data</th>
            <th>Observação</th>
            <th>Tratamento</th>
            <th>Ações</th>
        </tr>
    </thead>

    <tbody>
        <tr th:each="c : ${consultas}" th:id="'linha-' + ${c.id}">
            
            <td th:text="${c.paciente}"></td>
            <td th:text="${c.especialidade}"></td>
            <td th:text="${c.data}"></td>

            <td>
                <button class="btn-table btn-observacao"
                        th:attr="data-id=${c.id}, data-desc=${c.descricao}">
                    Exibir
                </button>
            </td>

            <td>
                <button class="btn-table btn-tratamento"
                        th:attr="data-id=${c.id}">
                    Exibir
                </button>
            </td>

            <!-- BOTÃO EXCLUIR -->
            <td>
                <button class="btn-table btn-excluir"
                        th:attr="data-id=${c.id}">
                    Excluir
                </button>
            </td>

        </tr>
    </tbody>
</table>
    <!-- === MODAL CONSULTA === -->
    <div id="modal" class="modal">
        <div class="modal-box">
            <h3>Detalhes da Consulta</h3>

            <label>Especialidade</label>
            <input id="mEspecialidade" class="input-full">

            <label>Data</label>
            <input id="mData" type="date" class="input-full">

            <label>Observação</label>
            <textarea id="mObs" rows="4" class="input-full"></textarea>

            <button onclick="fecharModal()" class="btn-secondary">Fechar</button>
        </div>
    </div>

    <!-- === MODAL OBSERVAÇÃO === -->
    <div id="modalObservacao" class="modal">
        <div class="modal-box">
            <h3>Observação da Consulta</h3>

            <input type="hidden" id="obsConsultaId">

            <textarea id="obsTexto" rows="6" class="input-full"></textarea>

            <button onclick="salvarObservacao()" class="btn-primary">Salvar</button>
            <button onclick="fecharObservacao()" class="btn-secondary">OK</button>
        </div>
    </div>
    <!-- === MODAL EXCLUIR CONSULTA === -->
<div id="modalExcluir" class="modal">
    <div class="modal-box">
        <h3>Excluir Consulta</h3>

        <p>Tem certeza que deseja excluir esta consulta?</p>

        <input type="hidden" id="excluirConsultaId">

        <div class="modal-actions">
            <button onclick="confirmarExclusao()">Confirmar</button>
                Excluir
            </button>
            <button onclick="fecharModalExcluir()" class="btn-secondary">
                Cancelar
            </button>
        </div>
    </div>
</div>

    <!-- SCRIPTS -->
    <script th:src="@{/js/modal.js}"></script>
    <script th:src="@{/js/observacao.js}"></script>
    <script th:src="@{/js/tratamento.js}"></script>
    <script th:src="@{/js/consultaExcluir.js}"></script>

</section>

</html>
